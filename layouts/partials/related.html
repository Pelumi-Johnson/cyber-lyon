{{/* Keep related content strictly inside the same content type/section */}}

{{ $currentType := .Type }}
{{ $currentSection := .Section }}

{{ $related := (.Site.RegularPages.Related .) }}
{{ $related = where $related "Params.hidden" "!=" true }}
{{ $related = where $related "Type" $currentType }}
{{ $related = where $related "Section" $currentSection }}
{{ $related = first 5 $related }}

{{ with $related }}
<aside class="related-content--wrapper">
    <h2 class="section-title">{{ T "article.relatedContent" }}</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            {{ range . }}
                {{ partial "article-list/tile" (dict "context" . "size" "250x150" "Type" "articleList") }}
            {{ end }}
        </div>
    </div>
</aside>
{{ end }}
